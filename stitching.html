<!doctype html>
<html class="no-js" lang="en">
<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="http://kushalvyas.github.io/theme/css/materialize.min.css">
        <!-- <link rel="stylesheet" type="text/css" href=""> -->
        <script src="http://kushalvyas.github.io/theme/js/jquery-1.11.3.min.js"></script>
        <script src="http://kushalvyas.github.io/theme/js/materialize.min.js"></script>
        <link rel="stylesheet" href="http://kushalvyas.github.io/theme/css/foundation.min.css" media="all">
        <script type="text/javascript" src="http://kushalvyas.github.io/theme/js/modernizr.js"></script>
        <link href='https://fonts.googleapis.com/css?family=Exo+2:400,300,700,300italic,400italic,700italic,900,900italic' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" type="text/css" href="http://kushalvyas.github.io/theme/css/font-awesome.min.css">
        <link rel="stylesheet" type="text/css" href="http://kushalvyas.github.io/theme/css/pygments.min.css">
        <link rel="stylesheet" type="text/css" href="http://kushalvyas.github.io/theme/css/subscribe.css">
        <!-- <script src="http://kushalvyas.github.io/theme/syntax/scripts/shAutoloader.js" type="text/javascript"></script> -->
        <!-- <link href="http://kushalvyas.github.io/theme/syntax/styles/shCore.css" rel="stylesheet" type="text/css" /> -->
        <!-- <link href="http://kushalvyas.github.io/theme/syntax/styles/shThemeRDark.css" rel="stylesheet" type="text/css" /> -->
        <!-- <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"> -->
        <link rel="stylesheet" href="http://kushalvyas.github.io/theme/css/lamboz.css" media="all">
        <title>Image&nbsp;Stitching </h1><h1> A Simplistic&nbsp;Tutorial - BitsMakeMeCrazy <br> Kushal Vyas's Blog</title>
        <meta charset="utf-8" />
        <link href="http://kushalvyas.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="BitsMakeMeCrazy <br> Kushal Vyas's Blog Full Atom Feed" />
        <link href="http://kushalvyas.github.io/feeds/cv-ip.atom.xml" type="application/atom+xml" rel="alternate" title="BitsMakeMeCrazy <br> Kushal Vyas's Blog Categories Atom Feed" />
  

        <script src="//load.sumome.com/" data-sumo-site-id="cecf6965e36602158241ee45155d77c8c02f27706e5178b61597811ab112b3a8" async="async"></script>   
        <style type="text/css">
        /*deactivate materialize ul li effecr*/
            ul li {
                list-style: browser-default;
            }
            li { list-style: circle; }
        </style>
       
</head>
<body>
    <div class="pages">
        <ul>
            <li class="home"><a href="http://kushalvyas.github.io/index.html">Home</a></li>
            <li ><a href="http://kushalvyas.github.io/pages/about-me.html">About&nbsp;me</a></li>
            <li ><a href="http://kushalvyas.github.io/pages/technical.html">Computer&nbsp;Vision</a></li>
            <li ><a href="http://kushalvyas.github.io/pages/projects.html">Projects</a></li>
            <li ><a href="http://kushalvyas.github.io/pages/Music.html">Music</a></li>

            <li style="float :right;" class=""><a href="http://www.github.com/kushalvyas" target="_blank"><i class="fa fa-github fa-2x" aria-hidden='true'></i>&nbsp;&nbsp;</a></li>
            <li style="float :right;" class=""><a href="mailto:kushalvyaskv@gmail.com" target="_blank"><i class="fa fa-envelope-o fa-2x" aria-hidden='true'></i>&nbsp;&nbsp;</a></li>
            <li style="float :right;" class=""><a href="https://twitter.com/kushal_kv" target="_blank"><i class="fa fa-twitter fa-2x" aria-hidden='true'></i>&nbsp;&nbsp;</a></li>
            <li style="float :right;" class=""><a href="https://www.youtube.com/channel/UCoAFKWmi3Wca8hj5GSEriRQ" target="_blank"><i class="fa fa-youtube fa-2x" aria-hidden='true'></i>&nbsp;&nbsp;</a></li>
            <li style="float :right;" class=""><a href="https://in.linkedin.com/in/kushal-vyas-44529ba9" target="_blank"><i class="fa fa-linkedin fa-2x" aria-hidden='true'></i>&nbsp;&nbsp;</a></li>
        </ul>
    </div>
<div class="hp-header-inner">
    <div class="page-header">
        <div class="content-header">
            <div id="title-block">
            <h1>  <a href="http://kushalvyas.github.io/stitching.html" rel="bookmark"
                    title="Permalink to Image Stitching A Simplistic Tutorial">Image&nbsp;Stitching </h1><h1> A Simplistic&nbsp;Tutorial</a></h1>
            </div>
        </div>
    </div>
</div>
    <div class="content">
        <div class="data-holder">
        <div class="row">
           <div class="large-10 content-column column">
<div class="content-article">
    <header class="header-article">
        <div class="read-more">Posted on Sun 25 September 2016</div>
 
   </header>
    <section class='article'>
        
        <div class="entry-summary">
            <p>Creating a panorama using multiple&nbsp;images</p>
        </div>
    
        <div class="entry-content">
            <h3>Multiple Image&nbsp;Stitching</h3>
<p>I must say, even I was enjoying while developing this tutorial . Something about image perspective and enlarged images is simply captivating to a computer vision student (<span class="caps">LOL</span>) . I think, image stitching is an excellent introduction to the coordinate spaces and perspectives vision. Here I am going to show how to take an ordered set of many images, <strong>(assuming they have been shot from left to right direction)</strong>&nbsp;.</p>
<p>So what is image stitching ? In simple terms, for an input group of images, the output is a composite image such that it is a culmination of scenes. At the same time, the logical flow between the images must be&nbsp;preserved.</p>
<p>For example, consider the set of images below. (Taken from <a href="https://www.mathworks.com/examples/matlab-computer-vision/mw/vision_product-FeatureBasedPanoramicImageStitchingExample-feature-based-panoramic-image-stitching">matlab examples</a>).
From a group of an input montage, we are essentially creating a singular stitched image. One that explains the full scene in detail. It is quite an interesting algorithm !
<center>
<img src="images/stitching/matlab_montage.png" width="400" height="300" >
<img src="images/stitching/matlab_pano.png" width="400" height="300"><br>
<caption>(Taken from <a href="https://www.mathworks.com/examples/matlab-computer-vision/mw/vision_product-FeatureBasedPanoramicImageStitchingExample-feature-based-panoramic-image-stitching">matlab examples</a>).</caption>
</center></p>
<p><strong>Topics being covered</strong>
The implementation will be carried out in python programming&nbsp;language. </p>
<ul>
<li>Reading multiple images ( in&nbsp;order)</li>
<li>Finding logical consistencies within images (this will be done using&nbsp;homography).</li>
<li>Stitching Up&nbsp;images. </li>
</ul>
<p>In need for any literature reference, please refer this <a href="http://matthewalunbrown.com/papers/ijcv2007.pdf">paper by Mathew&nbsp;Brown</a></p>
<h3>Let&#8217;s begin&nbsp;&#8230;</h3>
<p>Let&#8217;s first understand the concept of mosaicking or image stitching. Basically if you want to capture a big scene. Now your camera can only provide an image of a specific resolution and that resolution , say 640 by 480 , is certainly not enough to capture the big panoramic view. So , what one can do is capture multiple images of the entire scene and then put together all bits and pieces into one big mat of images. Yes, it seems good .. right ! Such photographs , which pose as an ordered collection of a scene are called as mosaics or panoramas. The entire process of acquiring multiple image and converting them into such panoramas is called as image mosaicking. And finally, we have one beautiful big and large photograph of the scenic&nbsp;view.</p>
<p>Another method for achieving this, is by using wide angle lens in your camera. What a wide angle lens does, is effectively increase your field of view. The output, will differ (obviously). But for the purposes of this tutorial, let&#8217;s get into how to create panoramas using computers and not lens&nbsp;:P </p>
<h3>Setting up the&nbsp;environment</h3>
<p>Please note that your system is setup with Python 2.7 (Code implementation is in python2.7 if you have other versions, please modify the code accordingly) and OpenCV 3.0 . We will be using OpenCV&#8217;s helper utilities for reading images, writing images and conversion of color spaces. Once the images are obtained, the entire computation of the panorama will be done using a home brewed function.  This blog article is divided into three major&nbsp;parts. </p>
<p><strong>*</strong> Input, read and process images : image paths from text files. Each textfile contains the list of paths to each image. <strong>Make sure that the paths are in left_to_right order of&nbsp;orientation.</strong></p>
<p><strong>*</strong> Computation relative orientation of images w.r.t each other :&nbsp;pairwise</p>
<p><strong>*</strong> The stitching / mix and match module : which essentially joins the two images at a&nbsp;time</p>
<h3>Algorithm</h3>
<p>The algorithm for performing image stitching is pretty&nbsp;straightforward.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre>    <span class="n">images</span> <span class="p">[]</span> <span class="o">&lt;--</span> <span class="n">Input</span> <span class="n">images</span>
    <span class="n">Assuming</span><span class="p">,</span> <span class="n">that</span> <span class="n">the</span> <span class="n">center</span> <span class="n">image</span> <span class="ow">is</span> <span class="n">no_of_images</span><span class="o">/</span><span class="mi">2</span>
    <span class="n">let</span> <span class="n">centerIdx</span> <span class="o">=</span> <span class="n">length</span><span class="p">(</span><span class="n">images</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>

    <span class="k">for</span> <span class="n">each</span> <span class="n">images</span><span class="p">[]</span> <span class="n">at</span> <span class="n">positions</span> <span class="mi">0</span> <span class="o">-&gt;</span> <span class="n">centerIdx</span> <span class="p">:</span>
        <span class="n">perform</span> <span class="n">leftward</span> <span class="n">stitching</span>

    <span class="k">for</span> <span class="n">each</span> <span class="n">images</span><span class="p">[]</span> <span class="n">at</span> <span class="n">positions</span> <span class="n">centerIdx</span> <span class="o">-&gt;</span> <span class="n">length</span><span class="p">(</span><span class="n">images</span><span class="p">):</span>
        <span class="n">perform</span> <span class="n">rightward</span> <span class="n">stitching</span>
</pre></div>
</td></tr></table>

<p>The output will be a complete mosaic of the input&nbsp;images.</p>
<p><strong>Some Constraints</strong>
The algorithm is time consuming, due to the number of iterations involved, it is best that hte input number of images is not too high or not of very high resolution (eg. 4000x3000). 
My implementation is based on a 2 <span class="caps">GB</span> <span class="caps">RAM</span> computer having intel i3 processor (Not tested it on my machine yet !). Feel free to upgrade/scale this model using higher specs, or maybe <span class="caps">GPU</span>&#8217;s .It&#8217;s never too late to&nbsp;try.</p>
<h3>Project Architecture&nbsp;:</h3>
<div class="highlight"><pre>    <span class="o">|</span><span class="n">_</span> <span class="n">code</span> <span class="o">-|</span>
    <span class="o">|</span>        <span class="o">|--</span> <span class="n">pano</span><span class="p">.</span><span class="n">py</span>
    <span class="o">|</span>        <span class="o">|--</span> <span class="n">txtlists</span><span class="o">-|</span>
    <span class="o">|</span>                     <span class="o">|--</span><span class="n">files1</span><span class="p">.</span><span class="n">txt</span> <span class="p">....</span> 
    <span class="o">|</span>   
    <span class="o">|</span><span class="n">_</span> <span class="n">images</span> <span class="o">-</span> <span class="o">|</span>
    <span class="o">|</span>           <span class="o">|-</span> <span class="n">img1</span><span class="p">.</span><span class="n">jpg</span>
    <span class="o">|</span>           <span class="o">|-</span> <span class="n">abc</span><span class="p">.</span><span class="n">jpg</span> 
    <span class="o">|</span>           <span class="p">....</span> <span class="n">and</span> <span class="n">so</span> <span class="n">on</span> <span class="p">...</span>
</pre></div>


<p><br></p>
<h2><strong> <a href="https://github.com/kushalvyas/Python-Multiple-Image-Stitching">Click here to check out the code</a> on <a href="https://github.com/kushalvyas" target="_blank">Github</a> </strong></h2>
<p><br></p>
<p>The project architecture is as follows. The code directory contains the main <code>pano.py</code> file. Also it contains a <code>txtlists/</code> directory which contains files having the paths to images in the panorama. These images are individually stored inside <code>images/ directory</code></p>
<p>In this tutorial, I will be using images from <a href="http://www.cvl.isy.liu.se/en/research/datasets/passta/" target="_blank"><span class="caps">PASSTA</span> Datasets</a>. It contains 2 datasets, Lunchroom and Synthetic.
Also, to test, I will be using images from <a href="http://study.marearts.com/2013/11/opencv-stitching-example-stitcher-class.html" target="_blank">Mare&#8217;s Computer Vision blog</a>. . I&#8217;ll be using <a href="https://github.com/daeyun/Image-Stitching/tree/master/img/hill" target="_blank">daeyun&#8217;s</a> test hill images as well. and <a href="">tsherlock</a> too !! (<strong>For respective usage and citations , take a look at the references</strong>)</p>
<h3>Now the real&nbsp;part.</h3>
<p>To understand either of the leftward stitching or rightward stitching module, first let&#8217;s get some vision concepts straight. They&nbsp;being: </p>
<ul>
<li>*Homography : Oh I love this&nbsp;!</li>
<li>*Warping : Cause, without warping, homography would feel a bit&nbsp;lonely</li>
<li>*Blending : Cause intensity differences are a bit too&nbsp;mainstream</li>
</ul>
<p><strong>Homography</strong></p>
<p>Okay, so assume you&#8217;re looking at a scenery. You will be having a field of view and that field of view is of what you want to make a panorama. You can rotate your head and cover a big area. But while you are looking straight, looking directly perpendicularly at a sub-scene, the remaining part of the scenery appears slightly inclined or slightly narrowed out. This is due to simple physics. Since you are facing in one direction, the things to your extreme periphery appears unclear, reduced in dimension and not necessarily straight/normal (a bit inclined). This is exactly what we will be&nbsp;exploiting.</p>
<p>Consider the images shown in the above figure. Every image will contain some common portion with the other images. Due to this commonness we are able to say that $image \text{ x}$ will either lie on to the right or left side of $image \text{ y&nbsp;}$.  </p>
<p>Anyway, now that I&#8217;ve made that clear, let&#8217;s proceed as to how do we calculate homography. Say you have a pair of images $I1 \text{ , } I2$ . You capture the first image. Then you decide to rotate your camera, or maybe perform some translation  or maybe a combination of rotation / translation motion. Then having update your new camera position , you capture a second image. The problem now at hand is, How do you solve for a system wherein you&#8217;re required to create a transformation that efficiently maps a point that is being projected in both the images. Or in simple terms, How do you visualize one image w.r.t another point of view, given there is some information available about both your points of&nbsp;views.</p>
<p><center>
<img src="images/stitching/per.png" width="400" height="300" >
<br>
<caption>Types of transforms</caption>
</center></p>
<p>Each of the above transformations performs some sorts of image transformation. For eg. a projective (well in your case,homography ) transform will preserve straight lines, .. etc. Moving on, a homography matrix is such that , if applied to any image, transforms image plane P1 to another image plane&nbsp;P2.</p>
<p>See the pic below, you&#8217;ll understand what i’m talking about.
<center>
<img src="images/stitching/mix.png">
<br>
<caption>Source :<a href="http://stackoverflow.com/questions/13570140/how-to-use-homography-to-transform-pictures-in-opencv">This <span class="caps">SO</span> Post</a> </caption>
</center></p>
<p>What you see above, can be an output of applying homography from $I1=H \times I2$ . <a href="http://stackoverflow.com/questions/13570140/how-to-use-homography-to-transform-pictures-in-opencv"><span class="caps">HOW</span> <span class="caps">TO</span> use Homography</a> to transform pictures in OpenCV? ( Check out this answer too. these pics have been taken from the aforementioned post&nbsp;).</p>
<p>You can use <a href="http://docs.opencv.org/2.4/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html?highlight=findhomography#findhomography">opencv findhomography ( )</a> method to solve for homography. For finding $I1=H \times I2$ you will need to pass coordinates of points in original image 1 plane and coordinates of target points in image 2 to the method. Once through, the method will spit out the homography&nbsp;matrix</p>
<p><br></p>
<p><strong>How to identify points to calculate homography&nbsp;!</strong></p>
<p>One of the straight forward methods is as&nbsp;follows</p>
<div class="highlight"><pre>    <span class="n">Compute</span> <span class="n">similar</span> <span class="n">features</span> <span class="n">in</span> <span class="n">both</span> <span class="n">images</span>

    <span class="n">Out</span> <span class="n">of</span> <span class="n">them</span> <span class="p">,</span> <span class="n">filter</span> <span class="n">out</span> <span class="n">good</span> <span class="n">features</span> <span class="p">(</span><span class="n">you</span><span class="err">&#39;</span><span class="n">ll</span> <span class="n">find</span> <span class="n">plenty</span> <span class="n">of</span> <span class="n">tutorials</span> <span class="n">on</span> <span class="n">these</span> <span class="p">)</span>

    <span class="n">Make</span> <span class="n">an</span> <span class="n">array</span> <span class="n">sorts</span> <span class="n">of</span> <span class="p">;</span> <span class="n">featuresofI1</span> <span class="o">==&gt;</span> <span class="p">[</span><span class="n">srcPoints</span><span class="p">],</span> <span class="n">featuresofI2</span> <span class="o">==&gt;</span><span class="p">[</span><span class="n">dstPoints</span><span class="p">]</span> <span class="p">(</span><span class="n">using</span> <span class="n">opencv</span> <span class="n">nomenclature</span><span class="p">)</span>

    <span class="n">Compute</span> <span class="n">Homography</span> <span class="n">matrix</span> <span class="n">using</span> <span class="n">RANSAC</span> <span class="n">algorithm</span>
</pre></div>


<p><br>
<strong> Step 1: Feature extraction</strong>:</p>
<p>We shall be using opencv_contrib&#8217;s <span class="caps">SIFT</span> descriptor. <span class="caps">SIFT</span> , as in Scale Invariant Feature Transform, is a very powerful <span class="caps">CV</span> algorithm. Please read my <a href="http://kushalvyas.github.io/BOV.html">Bag of Visual Words for Image classification post</a> to understand more about features.
Also, check out <a href="http://docs.opencv.org/3.1.0/da/df5/tutorial_py_sift_intro.html">OpenCV&#8217;s docs on <span class="caps">SIFT</span></a>. They are a pretty good resource as&nbsp;well! </p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre>    <span class="n">sift_obj</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">xfeatures2d</span><span class="o">.</span><span class="n">SIFT_create</span><span class="p">()</span>
    <span class="n">descriptors</span><span class="p">,</span> <span class="n">keypoints</span> <span class="o">=</span> <span class="n">sift_obj</span><span class="o">.</span><span class="n">detectAndCompute</span><span class="p">(</span><span class="n">image_gray</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>If you plot the features, this is how it will look .
(Image on left shows actual image. Image on the right is annotated with features detected by <span class="caps">SIFT</span>)</p>
<p>Example 1 : using Lunchroom image
<center>
<img src="images/stitching/sift_keypoints101.jpg"  >
<br>
<caption>Lunchroom image : <span class="caps">PASSTA</span> Dataset</caption>
</center></p>
<!-- Example 2 : using building image
<center>
<img src="images/stitching/building_sift.png" width="400" height="300" >
</center> -->

<p><strong> Step 2: Matching correspondences between images </strong>:</p>
<p>Once you have got the descriptors and keypoints of 2 images, i.e. an image pair, we will find correspondences between them. Why do we do this ? Well, in order to join any two images into a bigger images, we must obtain as to what are the overlapping points. These overlapping points will give us an idea of the orientation of the second image w.r.t to the other one. And based on these common points, we get an idea whether the second image has just slid into the bigger image  or has it been rotated and then overlapped, or maybe scaled down/up and then fitted. All such information is yielded by establishing correspondences. This process is called <strong>registration</strong>&nbsp;.</p>
<p>For matching, one can use either <span class="caps">FLANN</span> or BFMatcher, that is provided by&nbsp;opencv. </p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre>    <span class="c"># FLANN parameters</span>
    <span class="n">FLANN_INDEX_KDTREE</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">index_params</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">algorithm</span> <span class="o">=</span> <span class="n">FLANN_INDEX_KDTREE</span><span class="p">,</span> <span class="n">trees</span> <span class="o">=</span> <span class="mi">5</span><span class="p">)</span>
    <span class="n">search_params</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">checks</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>   <span class="c"># or pass empty dictionary</span>

    <span class="n">flann</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">FlannBasedMatcher</span><span class="p">(</span><span class="n">index_params</span><span class="p">,</span><span class="n">search_params</span><span class="p">)</span>

    <span class="n">matches</span> <span class="o">=</span> <span class="n">flann</span><span class="o">.</span><span class="n">knnMatch</span><span class="p">(</span><span class="n">des1</span><span class="p">,</span><span class="n">des2</span><span class="p">,</span><span class="n">k</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

    <span class="n">img3</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">drawMatchesKnn</span><span class="p">(</span><span class="n">img1c</span><span class="p">,</span><span class="n">kp1</span><span class="p">,</span><span class="n">img2c</span><span class="p">,</span><span class="n">kp2</span><span class="p">,</span><span class="n">matches</span><span class="p">,</span><span class="bp">None</span><span class="p">,</span><span class="o">**</span><span class="n">draw_params</span><span class="p">)</span>

    <span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s">&quot;correspondences&quot;</span><span class="p">,</span> <span class="n">img3</span><span class="p">)</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">()</span>
</pre></div>
</td></tr></table>

<p>Having computed the matches, you get a similar output&nbsp;: </p>
<p>With the Lunchroom dataset
<center>
<img src="images/stitching/matches12.png" > 
<br>
<caption>Feature matching on lunchroom images</caption>
</center></p>
<p>With the Hill example:
<center>
<img src="images/stitching/img31.png" width="400" height="300" >
<br>
<caption>Feature matching on hill example image</caption>
</center></p>
<!-- With the building example:
<center>
<img src="images/stitching/img3.png" width="400" height="300" >
</center> -->

<p><strong>Step 3: Compute&nbsp;Homography</strong></p>
<p>Yes, once we have obtained matches between the images, our next step is to calculate the homography matrix. As described above, the homography matrix will use these matching points, to estimate a relative orientation transform within the two images.
i.e. it&#8217;ll solve for the equation
<center>$$I_x = H \times I_y $$ </center>
Hence, it solves for the matrix&nbsp;$H$</p>
<p>Well,  to estimate the homography is a simple task. If you are using opencv, it&#8217;s a two line code. However , I&#8217;d recommend that one implements&nbsp;oneself.</p>
<div class="highlight"><pre><span class="n">H</span><span class="p">,</span> <span class="n">__</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">findHomography</span><span class="p">(</span><span class="n">srcPoints</span><span class="p">,</span> <span class="n">dstPoints</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">RANSAC</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
</pre></div>


<p>Viola ! Our homography matrix looks something like this&nbsp;&#8230;</p>
<p><center>
    $$ \begin{bmatrix}
h_\text{11} <span class="amp">&amp;</span> h_\text{12}  <span class="amp">&amp;</span> h_\text{13} \ 
h_\text{21} <span class="amp">&amp;</span> h_\text{22} <span class="amp">&amp;</span> h_\text{23}  \ 
h_\text{31} <span class="amp">&amp;</span> h_\text{32}   <span class="amp">&amp;</span> h_\text{33}
\end{bmatrix}&nbsp;$$</p>
<p></center></p>
<p>Anyway, putting the pretty graphics aside, understand what the homography matrix is . Homography preserves the straight lines in an image. Hence the only possible transformations possible are translations, affines, etc. For example, for an affine transform, $$\begin{bmatrix} h_\text{31} <span class="amp">&amp;</span> h_\text{32}   <span class="amp">&amp;</span> h_\text{33} \end{bmatrix} = \text{[0 0 1]}$$
Also, you can play around with $h_\text{13} \text{ and } \  h_\text{23}$ for&nbsp;translation</p>
<p><strong> Step 4 : Warping <span class="amp">&amp;</span> Stitching </strong>:</p>
<p>To understand stitching, I&#8217;d like to recommend <a href="http://www.pyimagesearch.com/2016/01/11/opencv-panorama-stitching/" target="_blank">Adrian Rosebrock&#8217;s blog post on OpenCV Panorama stitching</a>. His blog provides a wonderful explanation as to how to proceed with image stitching and panorama construction using 2&nbsp;images.</p>
<p>So , once we have established a homography, i.e. we know how the second image (let&#8217;s say the image to the right) will look from the current image&#8217;s perspective, we need to transform it into a new space. This transformation mimics the phenomenon that we undergo. That is, the slightly distorted, and altered image that we see from our periphery . This process is called warping. We are converting an image, based on a new transformation. In this case, Im using a planar warping. What I&#8217;m doing, is essentially change the plane of my field of view. Whereas, the &#8220;panorama apps&#8221; use something called as a Cylindrical and spherical warps&nbsp;! </p>
<p>Types of warping&nbsp;: </p>
<ul>
<li>*Planar : wherein every image is an element of a plane surface, subject to translation and rotations&nbsp;&#8230; </li>
<li>*Cylindrical : wherein every image is represented as if the coordinate system was cylindrical. and the image was plotted on the curved surface of the&nbsp;cylinder.</li>
<li>*Spherical : the above appends, instead of a cylinder, the reference model is a&nbsp;sphere.</li>
</ul>
<p>Each model has its&#8217; own application. For the purposes of this tutorial, I&#8217;ll stick to planar homography and&nbsp;warping.</p>
<p>So , to warp, essentially change the field of view, we apply the homography matrix to the&nbsp;image.</p>
<div class="highlight"><pre><span class="n">warped_image</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">warpPerspective</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">homography_matrix</span><span class="p">,</span> <span class="n">dimension_of_warped_image</span><span class="p">)</span>
</pre></div>


<p>Here is some visualization  &#8230;.  below are left warped and right warped images Note the orientation and projective-ness of each&nbsp;image. </p>
<p><center>
<img src="images/stitching/merge123.png"  >
<br>
<caption>Warping Images of Lunchroom !</caption>
</center></p>
<!-- 
<center>
<img src="images/stitching/merge12.jpg"  >
</center> -->

<p><strong>Stitching &#8216;em up&nbsp;! </strong></p>
<p>Once, we have obtained a warped image, we simply add the warped image along with the second image. Repeat this over through leftward stitching and rightward stitching, and viola! We have our&nbsp;output.</p>
<p>I&#8217;ll get  a bit deeper as to how to perform the image joining part. Say, we have a homography matrix $H$ . If the starting coordinate of each image is $(0 ,0)$ and end point is $(r_e, c_e)$ , we can get the new warped image dimension by $start_p = H \times [0, 0]$ uptill $end_p = H \times [r_e, c_e]$. <strong>Note : If start_pt comes out to be negative</strong> , account for a translational shift. i.e. &#8220;perform translation shift to the image by $ |start_p |$&#8221;. Also make sure that the homography matrix normalized such that the last row amounts to a unit&nbsp;vector.</p>
<p>You can checkout the above mentioned explanation below 
This is the implementation snippet from the actual code. Please look at the full code to understand in accordance with the&nbsp;post.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">leftstitch</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># self.left_list = reversed(self.left_list)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">left_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">left_list</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
            <span class="n">H</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">matcher_obj</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="s">&#39;left&#39;</span><span class="p">)</span>
            <span class="k">print</span> <span class="s">&quot;Homography is : &quot;</span><span class="p">,</span> <span class="n">H</span>
            <span class="n">xh</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">inv</span><span class="p">(</span><span class="n">H</span><span class="p">)</span>
            <span class="k">print</span> <span class="s">&quot;Inverse Homography :&quot;</span><span class="p">,</span> <span class="n">xh</span>
            <span class="c"># start_p is denoted by f1</span>
            <span class="n">f1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">xh</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]))</span>
            <span class="n">f1</span> <span class="o">=</span> <span class="n">f1</span><span class="o">/</span><span class="n">f1</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="c"># transforming the matrix </span>
            <span class="n">xh</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">f1</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">xh</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">f1</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">ds</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">xh</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">a</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">a</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">1</span><span class="p">]))</span>
            <span class="n">offsety</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">f1</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
            <span class="n">offsetx</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">f1</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
            <span class="c"># dimension of warped image</span>
            <span class="n">dsize</span> <span class="o">=</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">ds</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="n">offsetx</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">ds</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="n">offsety</span><span class="p">)</span>
            <span class="k">print</span> <span class="s">&quot;image dsize =&gt;&quot;</span><span class="p">,</span> <span class="n">dsize</span>
            <span class="n">tmp</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">warpPerspective</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">xh</span><span class="p">,</span> <span class="n">dsize</span><span class="p">)</span>
            <span class="c"># cv2.imshow(&quot;warped&quot;, tmp)</span>
            <span class="c"># cv2.waitKey()</span>
            <span class="n">tmp</span><span class="p">[</span><span class="n">offsety</span><span class="p">:</span><span class="n">b</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="n">offsety</span><span class="p">,</span> <span class="n">offsetx</span><span class="p">:</span><span class="n">b</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="n">offsetx</span><span class="p">]</span> <span class="o">=</span> <span class="n">b</span>
            <span class="n">a</span> <span class="o">=</span> <span class="n">tmp</span>
</pre></div>
</td></tr></table>

<p><br></p>
<p><strong> Another method : </strong> 
There is another method, i.e. using <code>basic for looping constructs</code> and overlay the two images.
The logic is simple. Input to the method will be the steadyimage and warpedImage. Iterate through both images, and if pixels are equal, put pixel as that value. else give preference to a non black pixel&nbsp;.. </p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre></div></td><td class="code"><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">mix_match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">leftImage</span><span class="p">,</span> <span class="n">warpedImage</span><span class="p">)</span>
        <span class="n">i1y</span><span class="p">,</span> <span class="n">i1x</span> <span class="o">=</span> <span class="n">leftImage</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">i2y</span><span class="p">,</span> <span class="n">i2x</span> <span class="o">=</span> <span class="n">warpedImage</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>


        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">i1x</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">i1y</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">if</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array_equal</span><span class="p">(</span><span class="n">leftImage</span><span class="p">[</span><span class="n">j</span><span class="p">,</span><span class="n">i</span><span class="p">],</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]))</span> <span class="ow">and</span>  \
                        <span class="n">np</span><span class="o">.</span><span class="n">array_equal</span><span class="p">(</span><span class="n">warpedImage</span><span class="p">[</span><span class="n">j</span><span class="p">,</span><span class="n">i</span><span class="p">],</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]))):</span>
                        <span class="c"># print &quot;BLACK&quot;</span>
                        <span class="c"># instead of just putting it with black, </span>
                        <span class="c"># take average of all nearby values and avg it.</span>
                        <span class="n">warpedImage</span><span class="p">[</span><span class="n">j</span><span class="p">,</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array_equal</span><span class="p">(</span><span class="n">warpedImage</span><span class="p">[</span><span class="n">j</span><span class="p">,</span><span class="n">i</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">])):</span>
                            <span class="c"># print &quot;PIXEL&quot;</span>
                            <span class="n">warpedImage</span><span class="p">[</span><span class="n">j</span><span class="p">,</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">leftImage</span><span class="p">[</span><span class="n">j</span><span class="p">,</span><span class="n">i</span><span class="p">]</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">array_equal</span><span class="p">(</span><span class="n">leftImage</span><span class="p">[</span><span class="n">j</span><span class="p">,</span><span class="n">i</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]):</span>
                                <span class="n">bl</span><span class="p">,</span><span class="n">gl</span><span class="p">,</span><span class="n">rl</span> <span class="o">=</span> <span class="n">leftImage</span><span class="p">[</span><span class="n">j</span><span class="p">,</span><span class="n">i</span><span class="p">]</span>                               
                                <span class="n">warpedImage</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">bl</span><span class="p">,</span><span class="n">gl</span><span class="p">,</span><span class="n">rl</span><span class="p">]</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">pass</span>
        <span class="c"># cv2.imshow(&quot;waRPED mix&quot;, warpedImage)</span>
        <span class="c"># cv2.waitKey()</span>
        <span class="k">return</span> <span class="n">warpedImage</span>
</pre></div>
</td></tr></table>

<p><br>
But this method will iterate over soooo many pixels. .. It&#8217;s very slow, for two reasons. Firstly , it involves heavy iteration. And, well, I&#8217;d personally execute such heavy loops in C++ and not&nbsp;python. </p>
<p>So, basically, this is how my main function looks &#8230; the heart and core of all&nbsp;implementations</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre>    <span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">args</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">args</span> <span class="o">=</span> <span class="s">&quot;txtlists/files1.txt&quot;</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">&quot;Parameters : &quot;</span><span class="p">,</span> <span class="n">args</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">Stitch</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
        <span class="n">s</span><span class="o">.</span><span class="n">leftshift</span><span class="p">()</span>
        <span class="c"># s.showImage(&#39;left&#39;)</span>
        <span class="n">s</span><span class="o">.</span><span class="n">rightshift</span><span class="p">()</span>
        <span class="k">print</span> <span class="s">&quot;done&quot;</span>
        <span class="n">cv2</span><span class="o">.</span><span class="n">imwrite</span><span class="p">(</span><span class="s">&quot;test.jpg&quot;</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">leftImage</span><span class="p">)</span>
        <span class="k">print</span> <span class="s">&quot;image written&quot;</span>
        <span class="n">cv2</span><span class="o">.</span><span class="n">destroyAllWindows</span><span class="p">()</span>
</pre></div>
</td></tr></table>

<p><br></p>
<h3>Implementation details : Check out the <a href="https://github.com/kushalvyas/Python-Multiple-Image-Stitching">code</a></h3>
<h3>Results&nbsp;!!!</h3>
<p>Well, I&#8217;ve run the code on following pictures ..
You can click as well as test on other sources which deal in panorama and image&nbsp;stitching.</p>
<p><center>
<img src="images/stitching/lunchroom_ultimate.jpg" ><br>
<caption>Stitching with Lunchroom dataset</caption>
<br><br>
<img src="images/stitching/444.png"><br>
<img src="images/stitching/wd123.jpg" ><br>
<caption>Stitching with my house&#8217;s dining table :P</caption>
<br><br>
<img src="images/stitching/test12345678.jpg" ><br>
<caption>Stitching with synthetic dataset</caption>
<br><br>
</center></p>
<p>Below are other images taken from github and various online sources. View references for more.
<center>
<img src="images/stitching/333.png"><br>
<img src="images/stitching/test.jpg" ><br>
<caption>Stitching with building example</caption>
<br><br>
<img src="images/stitching/222.png"><br>
<img src="images/stitching/test12.jpg"><br>
<caption>Stitching using Hill example</caption>
<br><br>
<img src="images/stitching/111.png"><br>
<img src="images/stitching/test1.jpg" ><br>
<caption>Stitching using room example</caption>
<br>
</center></p>
<p><br></p>
<h2><strong> <a href="https://github.com/kushalvyas/Python-Multiple-Image-Stitching">Click here to check out the code</a> on <a href="https://github.com/kushalvyas">Github</a> </strong></h2>
<p>I&#8217;ll cover cylindrical warping and how opencv actually implements stitching in a different post.
<br></p>
<p><br><br><br><br></p>
<h3>References&nbsp;:</h3>
<p>Base paper for panorama using scale invariant features&nbsp;:</p>
<p>[1] &#8220;Automatic Panoramic Image Stitching using Invariant Features&#8221;, Download.springer.com, 2016. [Online]. Available:&nbsp;matthewalunbrown.com/papers/ijcv2007.pdf</p>
<p>Test images taken from&nbsp;:</p>
<p>[2]&#8221;<span class="caps">PASSTA</span> Datasets&#8221;, Cvl.isy.liu.se, 2016. [Online]. Available:&nbsp;http://www.cvl.isy.liu.se/en/research/datasets/passta/.</p>
<p>[3] &#8220;OpenCV Stitching example (Stitcher class, Panorama)&#8221;, Study.marearts.com, 2013. [Online]. Available:&nbsp;http://study.marearts.com/2013/11/opencv-stitching-example-stitcher-class.html.</p>
<p>[4] &#8220;Github daeyun Image-Stitching Test Images&#8221;, 2016. [Online]. Available:&nbsp;https://github.com/daeyun/Image-Stitching/tree/master/img/hill. </p>
<p>[5] &#8220;Github tsherlock Test Images&#8221;, 2016. [Online]. Available: .&nbsp;https://github.com/tsherlock/panorama/</p>
        </div>
    </section>
    <footer class="footer-article">
        <div class="tags-and-categories">Filed under <a href="http://kushalvyas.github.io/category/cv-ip.html">CV, IP</a>
        | Tagged: <a href="http://kushalvyas.github.io/tag/cv.html">CV </a><a href="http://kushalvyas.github.io/tag/images.html">images </a><a href="http://kushalvyas.github.io/tag/stitching.html">stitching </a><a href="http://kushalvyas.github.io/tag/mosaicking.html">mosaicking </a>
        | <a href="http://kushalvyas.github.io/stitching.html" rel="bookmark"
         title="Permalink to Image Stitching A Simplistic Tutorial">Permalink</a>            
        </div>
        <!-- metaldata 
        -->
    </footer>
    <!-- disqus bitsmakemecrazy -->
        <hr>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = "bitsmakemecrazy"; // required: replace example with your forum shortname
            var disqus_identifier = "image-stitching--a-simplistic-tutorial";
            var disqus_url = "http://kushalvyas.github.io/stitching.html";
            var disqus_title = "Image Stitching A Simplistic Tutorial";
            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
            </div>
         
            <div class="large-2 aside column" id="SIDEID">
         
                <!-- <h3>Trending</h3>
                <ul>

                    <li><a href="http://kushalvyas.github.io/stitching.html">Image Stitching -  A Detailed Tutorial</a></li>

                    <li><a href="http://kushalvyas.github.io/BOV.html#BOV">Bag of Visual Words</a></li>

                    <li><a href="http://kushalvyas.github.io/gen_8Q.html">8 Queens GA</a></li>

                    <li><a href="http://kushalvyas.github.io/wiki_lookup.html">Wiki Lookup</a></li>
                </ul>
                <h3>Coming Soon</h3>
                <ul>
                        <li><a href="#" onclick="executeComingSoonPopUp();">ConvNets</a></li>
                        <li><a href="#" onclick="executeComingSoonPopUp();">Point clouds</a></li>
                </ul> -->
            </div>
            <script>
                function load_sideID(){
                    var curr_url=  document.URL;
                    if(curr_url.indexOf('projects')>0){
                        console.log("on project page");
                    }else{
                        console.log("not on project page");
                        var side= $("#SIDEID");
                        var data = "<h3>Trending</h3>";
                        data += "<ul>";
                           data += '<li><a href="http://kushalvyas.github.io/stitching.html">Image Stitching -  A Detailed Tutorial</a></li>';
                           data += '<li><a href="http://kushalvyas.github.io/BOV.html#BOV">Bag of Visual Words</a></li>';
                           data += '<li><a href="http://kushalvyas.github.io/gen_8Q.html">8 Queens GA</a></li>';
                           data += '<li><a href="http://kushalvyas.github.io/wiki_lookup.html">Wiki Lookup</a></li>';
                        data += "</ul>";

                        data +="<h3>Coming Soon</h3>";
                        data+="<ul>";
                            data+='<li><a href="">ConvNets</a></li>';
                            data+='<li><a href="">Point clouds</a></li>';
                        data += '</ul>';
                        side.append(data);
                    }
                }
                load_sideID();

            </script>
          
         </div>
    </div>
</div>
    <div class="footer">
        <div class="data-holder">
        <div class="row">
            <div class="large-3 column">
<div class="credits">
    <h3>Stuff and credits</h3>
    <p>
    Proudly powered by <a href="http://getpelican.com/" target="_blank">Pelican</a>, 
    which takes great advantage of <a href="http://python.org" target="_blank">Python</a>.
    </p>
    <p>Theme is a modified Pelican Bricks</p>
    <p>
    This site also makes use of <a href="http://foundation.zurb.com" target="_blank">Zurb Foundation Framework</a>
    and is typeset using the blocky -- but quite good-looking indeed -- 
    <a href="https://www.google.com/fonts/specimen/Exo%202" target="_blank">Exo 2</a> fonts,
    which comes in a lot of weight and styles. 
    </p>
    <p>Enjoy!</a>
</div>           </div>
           <div class="large-6 tag-cloud column">
                <h3>Tags</h3>
                <ul>
                    <li><a href="http://kushalvyas.github.io/tag/stitching.html">stitching</a>(1)</li>
                    <li><a href="http://kushalvyas.github.io/tag/mosaicking.html">mosaicking</a>(1)</li>
                    <li><a href="http://kushalvyas.github.io/tag/ai.html">AI</a>(1)</li>
                    <li><a href="http://kushalvyas.github.io/tag/utils.html">utils</a>(1)</li>
                    <li><a href="http://kushalvyas.github.io/tag/py.html">Py</a>(1)</li>
                    <li><a href="http://kushalvyas.github.io/tag/wikipedia.html">wikipedia</a>(1)</li>
                    <li><a href="http://kushalvyas.github.io/tag/dev.html">dev</a>(1)</li>
                    <li><a href="http://kushalvyas.github.io/tag/technical.html">technical</a>(1)</li>
                    <li><a href="http://kushalvyas.github.io/tag/images.html">images</a>(1)</li>
                    <li><a href="http://kushalvyas.github.io/tag/cv.html">CV</a>(4)</li>
                    <li><a href="http://kushalvyas.github.io/tag/objectrecognition.html">ObjectRecognition</a>(2)</li>
                </ul>
            </div>
            <div class="large-3 category-column column">
                <h3>Categories</h3>
                <ul>
                    <li><a href="http://kushalvyas.github.io/category/ai.html">AI</a> (1)</li>
                    <li><a href="http://kushalvyas.github.io/category/cv.html">CV</a> (2)</li>
                    <li class="active"><a href="http://kushalvyas.github.io/category/cv-ip.html">CV, IP</a> (1)</li>
                    <li><a href="http://kushalvyas.github.io/category/graph_py.html">graph_py</a> (1)</li>
                    <li><a href="http://kushalvyas.github.io/category/networks.html">networks</a> (1)</li>
                    <li><a href="http://kushalvyas.github.io/category/object-recognition-classification-cv.html">Object Recognition, Classification, CV</a> (1)</li>
                    <li><a href="http://kushalvyas.github.io/category/object-recognitioncv.html">Object Recognition,CV</a> (1)</li>
                    <li><a href="http://kushalvyas.github.io/category/technical-dev.html">technical, dev</a> (1)</li>
                    <li><a href="http://kushalvyas.github.io/category/utils.html">utils</a> (1)</li>
                </ul>
             
            </div>
        </row>
        </div>
    </div>

</body>
</html>